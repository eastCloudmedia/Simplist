<?php
/**
 * Created by PhpStorm.
 * User: farva
 * Date: 20/03/2018
 * Time: 02:13 AM
 */

namespace Controller\Panel;


use Model\Repository\MainFunction\PostRepository;
use Route\Show\View;

class AdminController
{
    public function __construct()
    {
        $this->Post= new PostRepository();
    }

    public function Index()
    {
        View::Process("Panel.Admin.Panel");
    }
    public function NewPost()
    {
        View::Process("Panel.Admin.NewPost");
    }
    public function Users()
    {
        View::Process("Panel.Admin.Users");
    }
    public function Post()
    {
        View::Process("Panel.Admin.Posts");
    }
    public function PostDelete($QuerryString)
    {

        $Querry= substr($QuerryString,29);

        if ($this->Post->GetPostById($Querry)['Rows']==1)
        {
            $Viewbag = ['PostInfo'=>$this->Post->GetPostById($Querry)['Values']];
            View::Process("Panel.Admin.PostDelete",$Viewbag);
        }
        else
        {
            View::Process("Helper.Home.Error404");
        }    }
    public function PostUpdate($QuerryString)
    {
        $Querry= substr($QuerryString,29);

        if ($this->Post->GetPostById($Querry)['Rows']==1)
        {
            $Viewbag = ['PostInfo'=>$this->Post->GetPostById($Querry)['Values']];
            View::Process("Panel.Admin.PostUpdate",$Viewbag);
        }
        else
        {
            View::Process("Helper.Home.Error404");
        }
    }
}